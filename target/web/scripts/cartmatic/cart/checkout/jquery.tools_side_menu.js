/*!
 * jQuery Tools v1.2.7 - The missing UI library for the Web
 * 
 * rangeinput/rangeinput.js
 * 
 * NO COPYRIGHTS OR LICENSES. DO WHAT YOU LIKE.
 * 
 * http://flowplayer.org/tools/
 * 
 */
(function(j){j.tools=j.tools||{version:"v1.2.7"};var i;i=j.tools.rangeinput={conf:{min:0,max:100,step:"any",steps:0,value:0,precision:undefined,vertical:0,keyboard:!0,progress:!1,speed:100,css:{input:"range",slider:"slider",progress:"progress",handle:"handle"}}};var p,o;j.fn.drag=function(a){document.ondragstart=function(){return !1},a=j.extend({x:!0,y:!0,drag:!0},a),p=p||j(document).on("mousedown mouseup",function(s){var r=j(s.target);if(s.type=="mousedown"&&r.data("drag")){var q=r.position(),d=s.pageX-q.left,c=s.pageY-q.top,b=!0;p.on("mousemove.drag",function(f){var u=f.pageX-d,t=f.pageY-c,h={};a.x&&(h.left=u),a.y&&(h.top=t),b&&(r.trigger("dragStart"),b=!1),a.drag&&r.css(h),r.trigger("drag",[t,u]),o=r}),s.preventDefault()}else{try{o&&o.trigger("dragEnd")}finally{p.off("mousemove.drag"),o=null}}});return this.data("drag",!0)};function n(e,d){var f=Math.pow(10,d);return Math.round(e*f)/f}function m(f,e){var h=parseInt(f.css(e),10);if(h){return h}var g=f[0].currentStyle;return g&&g.width&&parseInt(g.width,10)}function l(d){var c=d.data("events");return c&&c.onSlide}function k(R,Q){var P=this,O=Q.css,N=j("<div><div/><a href='#'/></div>").data("rangeinput",P),M,L,K,J,I;R.before(N);var H=N.addClass(O.slider).find("a").addClass(O.handle),G=N.find("div").addClass(O.progress);j.each("min,max,step,value".split(","),function(b,h){var c=R.attr(h);parseFloat(c)&&(Q[h]=parseFloat(c,10))});var F=Q.max-Q.min,E=Q.step=="any"?0:Q.step,D=Q.precision;D===undefined&&(D=E.toString().split("."),D=D.length===2?D[1].length:0);if(R.attr("type")=="range"){var C=R.clone().wrap("<div/>").parent().html(),B=j(C.replace(/type/i,"type=text data-orig-type"));B.val(Q.value),R.replaceWith(B),R=B}R.addClass(O.input);var A=j(P).add(R),g=!0;function f(c,u,s,r){s===undefined?s=u/J*F:r&&(s-=Q.min),E&&(s=Math.round(s/E)*E);if(u===undefined||E){u=s*J/F}if(isNaN(s)){return P}u=Math.max(0,Math.min(u,J)),s=u/J*F;if(r||!M){s+=Q.min}M&&(r?u=J-u:s=Q.max-s),s=n(s,D);var q=c.type=="click";if(g&&L!==undefined&&!q){c.type="onSlide",A.trigger(c,[s,u]);if(c.isDefaultPrevented()){return P}}var b=q?Q.speed:0,d=q?function(){c.type="change",A.trigger(c,[s])}:null;M?(H.animate({top:u},b,d),Q.progress&&G.animate({height:J-u+H.height()/2},b)):(H.animate({left:u},b,d),Q.progress&&G.animate({width:u+H.width()/2},b)),L=s,I=u,R.val(s);return P}j.extend(P,{getValue:function(){return L},setValue:function(d,h){e();return f(h||j.Event("api"),undefined,d,!0)},getConf:function(){return Q},getProgress:function(){return G},getHandle:function(){return H},getInput:function(){return R},step:function(c,h){h=h||j.Event();var d=Q.step=="any"?1:Q.step;P.setValue(L+d*(c||1),h)},stepUp:function(b){return P.step(b||1)},stepDown:function(b){return P.step(-b||-1)}}),j.each("onSlide,change".split(","),function(c,d){j.isFunction(Q[d])&&j(P).on(d,Q[d]),P[d]=function(h){h&&j(P).on(d,h);return P}}),H.drag({drag:!1}).on("dragStart",function(){e(),g=l(j(P))||l(R)}).on("drag",function(b,q,h){if(R.is(":disabled")){return !1}f(b,M?q:h)}).on("dragEnd",function(b){b.isDefaultPrevented()||(b.type="change",A.trigger(b,[L]))}).click(function(b){return b.preventDefault()}),N.click(function(b){if(R.is(":disabled")||b.target==H[0]){return b.preventDefault()}e();var d=M?H.height()/2:H.width()/2;f(b,M?J-K-d+b.pageY:b.pageX-K-d)}),Q.keyboard&&R.keydown(function(q){if(!R.attr("readonly")){var h=q.keyCode,d=j([75,76,38,33,39]).index(h)!=-1,b=j([74,72,40,34,37]).index(h)!=-1;if((d||b)&&!(q.shiftKey||q.altKey||q.ctrlKey)){d?P.step(h==33?10:1,q):b&&P.step(h==34?-10:-1,q);return q.preventDefault()}}}),R.blur(function(d){var h=j(this).val();h!==L&&P.setValue(h,d)}),j.extend(R[0],{stepUp:P.stepUp,stepDown:P.stepDown});function e(){M=Q.vertical||m(N,"height")>m(N,"width"),M?(J=m(N,"height")-m(H,"height"),K=N.offset().top+J):(J=m(N,"width")-m(H,"width"),K=N.offset().left)}function a(){e(),P.setValue(Q.value!==undefined?Q.value:Q.min)}a(),J||j(window).load(a)}j.expr[":"].range=function(a){var d=a.getAttribute("type");return d&&d=="range"||j(a).filter("input").data("rangeinput")},j.fn.rangeinput=function(b){if(this.data("rangeinput")){return this}b=j.extend(!0,{},i.conf,b);var a;this.each(function(){var c=new k(j(this),j.extend(!0,{},b)),d=c.getInput().data("rangeinput",c);a=a?a.add(d):d});return a?a:this}})(jQuery);