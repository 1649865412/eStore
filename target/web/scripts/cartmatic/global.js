if(!eCom){var eCom=new Object()}jQuery(document).ready(function(){jQuery("img[original]").lazyload({placeholder:__resPath+"/images/img/empty.gif",failurelimit:10})});String.prototype.trim=function(){return this.replace(/(^\s*)|(\s*$)/g,"")};function trim(a){return a==null?null:a.trim()}function fnAppendUrl(a,c,d){if(!a||!c||!d){return a}var b=removeParamFromUrl(a,c);return b+(b.indexOf("?")>-1?"&":"?")+c+"="+d}function removeParamFromUrl(a,b){return a.replace(new RegExp("("+b+"=[^&]*[&])|([?|&]"+b+"=[^&]*$)"),"")}function getEvent(){if(document.all){return window.event}var b=getEvent.caller;while(b!=null){var a=b.arguments[0];if(a){if((a.constructor==Event||a.constructor==MouseEvent)||(typeof(a)=="object"&&a.preventDefault&&a.stopPropagation)){return a}}b=b.caller}return null}function getEventSourceObject(){var a=getEvent();return a.srcElement||a.target}function _defaultAjaxErrorHandler(a,b){alert(a)}function log(a){typeof console=="undefined"?alert(a):console.log(a)}function setCookie(b,d,a,f,c,e){document.cookie=b+"="+escape(d)+((a)?"; expires="+a.toGMTString():"")+((f)?"; path="+f:"")+((c)?"; domain="+c:"")+((e)?"; secure":"")}function getCookie(b){var c=b+"=";var e=document.cookie.indexOf(c);if(e==-1){return null}e+=c.length;var a=document.cookie.indexOf(";",e);if(a==-1){a=document.cookie.length}var d=document.cookie.substring(e,a);if(d){d=d.replace(/"/g,"");d=decodeURI(d)}return unescape(d)}function fnResizeImage(b,c,a){if(c>=b.width&&a>=b.height){return}if((b.width/b.height)>(c/a)){b.width=c}else{b.height=a}}function getCurrentUserId(){return getCookie("UID")||-2}function isLogined(){return getCurrentUserId()>0}function getCurrentUserName(a){return(!a||isLogined())&&getCookie("UNAME")||""}function getLoginUserEmail(a){return(!a||isLogined())&&getCookie("UEMAIL")||""}var bCancel=false;function isIE(){return(navigator.userAgent.toLowerCase().indexOf("msie")!=-1)}var onloadHandlers=[];function addOnload(a){if(a){onloadHandlers.push(a)}}$(document).ready(function(){for(var a=0;a<onloadHandlers.length;++a){onloadHandlers[a].call(this)}});function fillLoginPrompt(){var b="";if(!isLogined()){b=$("#loginPromptHolderTemplateLogout").html()}else{var a=getCookie("UNAME");if(a.indexOf("@")!=-1){a=a.substring(0,a.indexOf("@"))}b=format_params($("#loginPromptHolderTemplateLogin").html(),a)}if($("#loginPromptHolder")){$("#loginPromptHolderTemplateLogout").html(b)}}function fnSelectTab(f,b){var a="tab_";if(b){a=b}var g=10;for(var h=1;h<=g;h++){var c=$("#"+a+"head_"+h);var e=$("#"+a+"content_"+h);if(c){if(h==f){c.addClass("selected");e.show()}else{c.removeClass("selected");e.hide()}}}}var _eComDialogs=new Array();var currentDialog=null;var _dialogZIndex=10000;var dialogIdPrefix="divDlg";eCom.SimpleDialog=function(config){var dialogId=config.dialogId;var showTime=0;var dlgModalDom=document.createElement("div");dlgModalDom.id=dialogIdPrefix+dialogId;dlgModalDom.style.display="none";dlgModalDom.className="more-photo sifang";var dlgParentDom=config.parentDom||document.body;dlgParentDom.appendChild(dlgModalDom);var dlgOverlay=$('<div id="'+dlgModalDom.id+'Overlay" class="opipoverlay" style="display:none;"><div style="background: none repeat scroll 0% 0% rgb(63, 76, 88); opacity: 0.4;"></div></div>');$(dlgParentDom).prepend(dlgOverlay);dlgModalDom.innerHTML=_getDlgBoxHtml(dialogId,config.dialogTitle);dlgOverlay.click(function(){closeSimpleDialog(dialogId)});var divContentDom=$("#_dlgContBox"+dialogId);var dialogContent=config.dialogContent;if(typeof dialogContent=="string"&&dialogContent.trim().length>=0){divContentDom.html(dialogContent)}else{if(dialogContent!==null){divContentDom.append(dialogContent)}}var staticDialogUrl=config.staticDialogUrl;var cacheEnabled=config.cacheEnabled||true;var onshowHandler=config.onshowHandler;var _savedOnshowHandler=null;var fillContentDivId=config.fillContentDivId||divContentDom;var savedDialogPageUrl=null;var _fnOnshowHandlerProxy=function(){if(_savedOnshowHandler){if(typeof _savedOnshowHandler=="function"){_savedOnshowHandler.call(this)}else{eval(_savedOnshowHandler+"()")}}dlgModalDom.style.left=config.left||Math.round(((parseInt(document.documentElement.clientWidth||document.body.clientwidth)-parseInt($(dlgModalDom).width()))/2))+"px";dlgModalDom.style.top=config.top||Math.round(((parseInt(document.documentElement.clientHeight||document.body.clientHeight)-parseInt($(dlgModalDom).height())-40)/2)+(document.documentElement.scrollTop||document.body.scrollTop))+"px";dlgModalDom.style.zIndex=_dialogZIndex+=10;dlgModalDom.style.display="block";currentDialog=this};return{showDialog:function(dynamicPageUrl,dynamicOnshowHandler){_savedOnshowHandler=dynamicOnshowHandler||onshowHandler;var _dialogPageUrl=dynamicPageUrl||staticDialogUrl;if(_dialogPageUrl&&(!cacheEnabled||_dialogPageUrl!=savedDialogPageUrl)){savedDialogPageUrl=_dialogPageUrl;_dialogPageUrl=fnAppendUrl(_dialogPageUrl,"inDialog","true");fillDivWithPage(fillContentDivId,_dialogPageUrl,null,_fnOnshowHandlerProxy,"GET",true)}else{_fnOnshowHandlerProxy()}toggleBtn();showTime=new Date().valueOf();$("#"+dlgModalDom.id+"Overlay").show()},closeDialog:function(){dlgModalDom.style.display="none";currentDialog=null;$("#"+dlgModalDom.id+"Overlay").hide()},getDialogId:function(){return dialogId},getShowTime:function(){return showTime}}};function getSimpleDialog(a){for(i=0;i<_eComDialogs.length;i++){if(_eComDialogs[i].getDialogId()==a){return _eComDialogs[i]}}return null}function _getDlgBoxHtml(b,a){return['<div class="more-title"><strong>',a,'</strong><div class="m-close"><a href="javascript:void(0)" onclick="closeSimpleDialog(\'',b,'\');return false;"></a></div></div><div class="blank10"></div><div class="more-content" id="_dlgContBox',b,'"></div>'].join("")}function fnCreateSimpleDialog(b,a,d,c){var e=getSimpleDialog(b);if(!e){c.dialogId=b;c.dialogTitle=a;c.dialogContent=d;e=new eCom.SimpleDialog(c);_eComDialogs.push(e)}return e}function showSimpleDialog(a){var b=getSimpleDialog(a);if(b){b.showDialog()}}function closeSimpleDialog(a){var b=getSimpleDialog(a);if(b){b.closeDialog()}}function _ajaxReadyStateHandler(h,f,c,e){var a=h.readyState;if(a==4){var b=h.status;if(b>=200&&b<300){c.call(this,h.responseText)}else{var d="ERROR request: "+f+"\n\nReadyState: "+a+"\nStatus: "+b+"\nHeaders: "+h.getAllResponseHeaders();var g=e||_defaultAjaxErrorHandler;g.call(this,d,h)}}}function ajaxCall(c,g,a,e,h,d){var j=null;if(window.ActiveXObject){j=new ActiveXObject("Msxml2.XMLHTTP")}else{if(window.XMLHttpRequest){j=new XMLHttpRequest()}}if(j==null){return alert("XMLHttpRequest is not supported!")}var b=c;if((g&&g.length>0)&&(a!="POST")){b+=(b.match(/\?/)?"&":"?")+g}var f=e==null?true:e;if(f){j.onreadystatechange=function(){_ajaxReadyStateHandler(j,b,h,d)}}j.open(a,b,f);if(a=="POST"){j.setRequestHeader("Content-type","application/x-www-form-urlencoded");j.send(g)}else{j.send(null)}if(!f){_ajaxReadyStateHandler(j,b,h,d)}}function fillDivWithPage(e,d,b,c,a,f){if(b==null||b==""){a="GET"}ajaxCall(d,b,a||"POST",f,function(j){var k=null;if(typeof(e)=="string"){k=$("#"+e).get(0)}else{k=e.get(0)}if(document.createRange){var h=document.createRange();h.setStartBefore(k);var g=h.createContextualFragment(j);while(k.hasChildNodes()){k.removeChild(k.lastChild)}k.appendChild(g)}else{k.innerHTML=j}if(c){c.call(this)}})}function _isLoaded(a){var c=document.getElementsByTagName(a.toLowerCase().lastIndexOf(".css")>0?"link":"script");for(i=0;i<c.length;i++){var b=c.href||c[i].src||c[i].syncUrl;if(b&&b.indexOf(a)!=-1){return true}}return false}function $importSync(a,b){if(_isLoaded(a)){return}ajaxCall(a.indexOf(__ctxPath)==0?a:(__ctxPath+a),null,"GET",false,function(e){if(e!=null){var d=document.getElementsByTagName("head")[0];var c=document.createElement("script");c.type="text/javascript";c.defer=b||true;c.text=e;c.syncUrl=a;d.appendChild(c)}},function(){alert("Failed to load script: "+a)})}function JsCssLoader(){this.load=function(b){if(_isLoaded(b)){this.onsuccess();return}if(b.toLowerCase().lastIndexOf(".css")>0){var d=document.createElement("link");d.setAttribute("rel","stylesheet");d.setAttribute("type","text/css");d.setAttribute("href",b)}else{var d=document.createElement("script");d.type="text/javascript";d.src=b}var c=document.getElementsByTagName("head")[0];c.appendChild(d);var a=this;d.onload=d.onreadystatechange=function(){if(d.readyState&&d.readyState=="loading"){return}a.onsuccess(b)};d.onerror=function(){c.removeChild(d);a.onfailure(b,arguments)}};this.onsuccess=function(a){};this.onfailure=function(b,a){alert("Error loading JavaScript/StyleSheet: "+a[0]+" -- "+a[1]+" -- "+a[2])}}function $import(b,c){if(!(b instanceof Array)){alert("Invalid $import call syntax, must be array.");return}var a=new JsCssLoader();if(b.length>1){a.onsuccess=function(){$import(b.slice(1,b.length),c)}}else{if(c){a.onsuccess=c}}a.load(b[0].indexOf(__ctxPath)==0?b[0]:(__ctxPath+b[0]))}function getJSON(url,param,callback){ajaxCall(url.indexOf(__ctxPath)==0?url:(__ctxPath+url),param,"GET",false,function(responseText){callback.call(this,eval("("+responseText+")"))},function(){alert("Failed to get JSON: "+url)})}function fnValidateEmail(b){var a=/[a-z0-9!#$%&'*+\/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+\/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?/i;if(a.test(b)){return true}else{return false}}function fnHidePop(a,b){a=a||window.event;o=a.relatedTarget||a.toElement;if(o==null){return}while(o.parentNode&&o.id!=b){o=o.parentNode}if(o.id!=b){$("#"+b).hide()}}function fnCheckSearchForm(a){if(a.q.value==""){alert("请输入要搜索的商品信息!");a.q.focus();return false}return true}function format_params(a,b){if(arguments.length==1){return function(){var c=$.makeArray(arguments);c.unshift(a);return format.apply(this,c)}}if(arguments.length>2&&b.constructor!=Array){b=$.makeArray(arguments).slice(1)}if(b.constructor!=Array){b=[b]}$.each(b,function(c,d){a=a.replace(new RegExp("\\{"+c+"\\}","g"),d)});return a}function fnFormatNumber(b){if(b==null){return 0}b+="";x=b.split(".");x1=x[0];x2=x.length>1?"."+x[1]:"";var a=/(\d+)(\d{3})/;while(a.test(x1)){x1=x1.replace(a,"$1,$2")}return x1+x2}function fnFormatPrice(a){if(a==null){a=0}else{a=fnFormatNumber(parseFloat(a).toFixed(2))}return"￥ "+a}(function(c){var a={marquee:function b(f){var e=c(this);var j=e.attr("scrollHeight");e.append(e.html());var g={timeout:null,events:{play:function(k){var l=c(this);var m=l.scrollTop();if(m>=j){l.scrollTop(m=m-j)}l.animate({scrollTop:m+g.step-m%g.step},2000,function(){if(g.timeout){clearTimeout(g.timeout)}g.timeout=setTimeout(function(){l.marqueePlay()},g.time)})},stop:function(k){var l=c(this);clearTimeout(g.timeout);l.stop()}}};if(e.data("marquee.settings")){g=e.data("marquee.settings")}g=c.extend(f,g);for(var h in g.events){var d="marquee."+h;e.unbind(d);e.bind(d,g.events[h])}e.data("marquee.settings",g);e.marqueePlay();return e},marqueePlay:function(){c(this).trigger("marquee.play")},marqueeStop:function(){c(this).trigger("marquee.stop")}};c.each(a,function(d){c.fn[d]=this})})(jQuery);var addthis_url=location.href;var addthis_title=document.title;var addthis_pub="dressesheaven";function at12Y(){var b="";addthis_url=encodeURIComponent(addthis_url);addthis_title=encodeURIComponent(addthis_title);addthis_title=addthis_title.replace(/'/g,"\\'");var a='<a href="'+at12I("")+'" onclick="return addthis_to();"></a>';$("#bookMarkImg").wrap(a)}function at12I(a){return"http://www.addthis.com/bookmark.php?v=12&winname=addthis&pub="+addthis_pub+"&s="+a+"&url="+addthis_url+"&title="+addthis_title}function addthis_to(a){if(a=="favorites"){addthis_url=decodeURIComponent(addthis_url);addthis_title=decodeURIComponent(addthis_title);if(document.all){window.external.AddFavorite(addthis_url,addthis_title)}else{window.sidebar.addPanel(addthis_title,addthis_url,"")}return false}window.open(at12I(a),"addthis","scrollbars=yes,menubar=no,width=620,height=400,resizable=yes,toolbar=no,location=no,status=no");return false}function toggleBtn(){$("button[class*='toggle']").hover(function(){var a=$(this);if(!_breakWitch(a)){a.addClass("on")}},function(){var a=$(this);if(!_breakWitch(a)){a.removeClass("on")}})}function _breakWitch(a){return a.hasClass("loading")||a.hasClass("stock")||a.hasClass("no-addtocart")}$(document).ready(function(){toggleBtn();at12Y()});$(function(){$(".cart_tabs").children().mousemove(function(){var a=$("#"+$(this).attr("name"));if(a){$(this).addClass("selected").siblings().removeClass("selected");a.show().siblings().hide()}});$(".cart_mscroll").each(function(c){var e=$(this);var d=jQuery.parseJSON(e.attr("data-value"));var b=parseFloat(d.onePageLenght);var a=b*e.children().size();$("#"+d.next).click(function(){var f=parseFloat(e.css("left"));f-=b;if(f<=-a){f=0}e.css("left",f+"px")});$("#"+d.prev).click(function(){var f=parseFloat(e.css("left"));f+=b;if(f>0){f=a*-1+b}e.css("left",f+"px")})})});