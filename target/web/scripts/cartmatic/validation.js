bCancel=false;function applyValidate(b,c){if(b==null){return}if(b.type=="radio"||b.type=="checkbox"){var d=document.getElementsByName(b.name);for(var a=0;a<d.length;a++){d[a].onclick=validateEventHandler;d[a].setAttribute("validConf","required")}validateRadio(d[0])}else{b.onblur=validateEventHandler;if(c){b.setAttribute("validConf",c||"required")}}}function removeValidate(a,b){a.onblur=null;if(b){a.removeAttribute("validConf")}}function validateEventHandler(){var a=getEventSourceObject();if(a.type=="radio"||a.type=="checkbox"){return validateRadio(a)}return validateField(a)}function validateField(field){var errMsg="";var strConfs=field.getAttribute("validConf");if(!field||field.disabled||!strConfs){return errMsg}var confs=strConfs.split(",");var value=field.value;for(var i=0;i<confs.length;i++){var params="";var idx=confs[i].indexOf("=");var valType;if(idx>0){valType=confs[i].substring(0,idx);params=confs[i].substring(idx+1,confs[i].length)}else{valType=confs[i]}var methodName="validate"+valType.substring(0,1).toUpperCase()+valType.substring(1,valType.length);if(!eval(methodName).call(this,value,params)){errMsg+=eval("__vaMsg."+valType);if(params.length>0&&methodName!="validateMask"){errMsg+=params}errMsg+=" <br/>"}}return __handleVaErrMsg(field,errMsg)}function validateRadio(a){var d=document.getElementsByName(a.name);if(d&&d.length>0){var c=__vaMsg.radio;for(var b=0;b<d.length;b++){if(d[b].checked){c=""}}return __handleVaErrMsg(d[d.length-1],c)}return""}var inputFilter={button:0,submit:0,reset:0,image:0,file:0};function validateForm(f){if(bCancel){return true}var e=f||document.forms[0];var a=e.getElementsByTagName("*");var d=0;var b=-1;for(var c in a){b++;if(!a[b]||!a[b].type||a[b].type in inputFilter||a[b].disabled){continue}if(a[b].type=="radio"||a[b].type=="checkbox"){if(a[b].getAttribute("validConf")&&validateRadio(a[b]).length>0){d++}}else{if(validateField(a[b]).length>0){d++}}}return(d==0)}function autoApplyValidate(e){var d=e||document.forms[0];var a=d.getElementsByTagName("*");var b=-1;for(var c in a){b++;if(!a[b]||!a[b].type||a[b].type in inputFilter){continue}if(a[b].getAttribute("validConf")){applyValidate(a[b])}}}function createTip(a,b){if(!$.isFunction($(document).PQuickTip)){setTimeout("createTip('"+a+"','"+b+"')",500)}else{$("#validate_"+a).PQuickTip({source:"text",text:b,title:"Error"})}}function __handleVaErrMsg(e,d){if(d&&d.length>0){var b=e.id==""?e.name:e.id;var a=$(e);var c=$("#validate_"+b);if(c.length==0){a.addClass("x-form-invalid");$("<img id='validate_"+b+"' src='"+__ctxPath+"/images/validate/exclamation.gif' border=0>").appendTo("body");$("#validate_"+b).appendTo(a.parent());$("#validate_"+b).bind("remove",function(){$(this).PQuickTip.removeTip($(this))})}if(!$.isFunction($(document).PQuickTip)){$(document.createElement("script")).attr("src",__ctxPath+"/scripts/jquery/plugins/quicktip/quicktip.js").attr("type","text/javascript").appendTo("head");$(document.createElement("link")).attr("href",__ctxPath+"/scripts/jquery/plugins/quicktip/quicktip.css").attr("rel","stylesheet").attr("type","text/css").appendTo("head")}createTip(b,d)}else{var b=e.id||e.name;var a=$(e);a.removeClass("x-form-invalid");$("#validate_"+b).trigger("remove");$("#validate_"+b).remove()}return d}var reNumber=new RegExp("^[\\d,]*$");var reDouble=new RegExp("^[\\d,]*(\\.\\d+)?$");var rePrice=new RegExp("^[\\d,]*(\\.\\d{1,2})?$");var reDouble4=new RegExp("^[\\d,]*(\\.\\d{1,4})?$");var reEmail=/^([\w-]+)(.[\w-]+)*@([\w-]+\.){1,5}([A-Za-z]){2,4}$/;var reCode=new RegExp("^[\\w-\\d]+$");var rePhone=new RegExp("^[\\d]{6,8}$");var reMobile=new RegExp("^[\\d]{9,11}$");var reUrl=/(((https?)|(ftp)):\/\/([\-\w]+\.)+\w{2,3}(\/[%\-\w]+(\.\w{2,})?)*(([\w\-\.\?\\\/+@&#;`~=%!]*)(\.\w{2,})?)*\/?)/i;var reMoney=new RegExp("^[\\d,-]?[\\d]*(\\.\\d{1,2})?$");function skipIfEmpty(a){return a==null||a.trim().length==0}function testRegExp(a,b){return a.test(b)}function validateInteger(a){if(skipIfEmpty(a)){return true}return validateNumber(a)&&validateMaxValue(a,2147483647)}function validatePositiveInteger(a){if(skipIfEmpty(a)){return true}return validateNumber(a)&&validateMaxValue(a,2147483647)&&validateMinValue(a,1)}function validateShort(a){if(skipIfEmpty(a)){return true}return validateNumber(a)&&validateMaxValue(a,32767)}function validateNumber(a){return skipIfEmpty(a)||testRegExp(reNumber,a)}function validateDouble(a){return skipIfEmpty(a)||testRegExp(reDouble,a)}function validatePrice(a){return skipIfEmpty(a)||testRegExp(rePrice,a)}function validateMoney(a){return skipIfEmpty(a)||testRegExp(reMoney,a)}function validateDouble4(a){return skipIfEmpty(a)||testRegExp(reDouble4,a)}function validateRequired(a){return !(a==null||a.trim().length==0)}function validateEmail(a){if(skipIfEmpty(a)){return true}return testRegExp(reEmail,a)&&validateMaxlength(a,128)}function validateCode(a){return skipIfEmpty(a)||testRegExp(reCode,a)}function validatePhone(a){return skipIfEmpty(a)||testRegExp(rePhone,a)}function validateMobile(a){return skipIfEmpty(a)||testRegExp(reMobile,a)}function validateMaxlength(b,a){return skipIfEmpty(b)||b.length<=a}function validateMinlength(b,a){return skipIfEmpty(b)||b.length>=a}function validateMaxValue(b,a){return skipIfEmpty(b)||(parseFloat(b)<=parseFloat(a))}function validateMinValue(b,a){return skipIfEmpty(b)||(parseFloat(b)>=parseFloat(a))}function validateNoHtml(a){return(a.indexOf("<")==-1&&a.indexOf("<")==-1)}function validateFloatRange(d,b){if(skipIfEmpty(d)){return true}var a=parseFloat(b.substring(1,b.indexOf("-")));var c=parseFloat(b.substring(b.indexOf("-")+1,b.indexOf("]")));return parseFloat(d)>=a&&parseFloat(d)<=c}function validateIntRange(d,b){if(skipIfEmpty(d)){return true}var a=parseInt(b.substring(1,b.indexOf("-")));var c=parseInt(b.substring(b.indexOf("-")+1,b.indexOf("]")));return parseInt(d)>=a&&parseInt(d)<=c}function validateDate(e){if(skipIfEmpty(e)){return true}if(e.length!=__defDatePattern.length){return false}var d=e.substr(__defDatePattern.indexOf("yyyy"),4);var b=e.substr(__defDatePattern.indexOf("MM"),2);var c=e.substr(__defDatePattern.indexOf("dd"),2);var a=new Date(d,b-1,c);if((new Number(c)).valueOf()==a.getDate()&&(new Number(b)).valueOf()==(a.getMonth()+1)&&d==a.getFullYear()){return true}return false}function validateUrl(a){return skipIfEmpty(a)||testRegExp(reUrl,a)}function validateMask(b,a){return skipIfEmpty(b)||testRegExp(new RegExp(a),b)};